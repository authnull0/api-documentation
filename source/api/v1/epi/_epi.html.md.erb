# Endpoint Management
Endpoint management is the process of actively monitoring, detecting, and preventing malware attacks on devices that are connected to a network. This is typically done to implement security policies and monitor suspicious activities on endpoints.Its can be done by

1.Inventory / management of Endpoints or servers (windows, linux, macos and others) 

2.Active Directory Sync for users (one way only). 

3.Workflows to control permissions

4.Linux user management through Linux User Management Service.

## List All Instances
List All Instances lists all the instances that are present .

```shell
curl --location --request POST 'https://api.authnull.kloudlearn.com/api/v1/instances/list' \
```

```http
POST /api/v1/instances/list HTTP/1.1
```

```json
{
    "domainId":1,
    "pageId":1,
    "pageSize":10
}
```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/list HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
domainId | Domain Id of the Apps
instanceName | Name of the instance
osId | Id of the OS used
publicIp | Public Ip of the instance
privateIp | Private Ip of the Instance
totalUser | Total number of Users
hostName | Name of the host
status | Status of the instances


### HTTP Response

`All the instances listed below.`

```json
{
  "domainId": 1,
  "groupId": 1,
  "instances": [
      {
          "totalUsers": 2,
          "instanceName": "lap",
          "osName": "RedHat",
          "publicIp": "qw12",
          "privateIp": "",
          "hostName": "",
          "status": "active",
          "instanceId": 1
      }
```

<aside class="success">
All the instances listed below.
</aside>

## Add Instances
Add Instances adds particular instances to the existing list.

```shell
curl --location --request POST 'https://api.authnull.kloudlearn.com/api/v1/instances/add-instance' \
```

```http
POST /api/v1/instances/add-instance HTTP/1.1
```

```json
{
"domain_id":1234,
"instance_name":"kloudone.vm",
"os_id":1,
"public_ip":"144.32.55.5",
"private_ip":"10.32.45.1"
}
```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/add-instance HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
machineKey| Machine Key of the instances
osId | Id of the OS used
publicIpAddress | Public Ip of the instance
privateIpAddress | Private Ip of the Instance


### HTTP Response

`Instance added to the list.`

```json
{
  "instance_id": "fdsf-dfdf-gfdsgf-fdsgfdg-fdge",
  "code": 200,
  "message": "success" 
}
```
<aside class="success">
Instance added to the list.
</aside>

## Update Instances Status
It updates the instances that are present.

```shell
curl --location --request PUT 'https://api.authnull.kloudlearn.com/api/v1/instances/update-instance' \
```

```http
PUT /api/v1/instances/update-instance HTTP/1.1
```

```json
{
  "domainId": "123",
  status:"ACTIVE"
  "instanceIds": ["1,2,3"]
}

{
  "domainId": "123",
  status:"DISABLED"
  "instanceIds": ["1,2,3"]
}
```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/add-instance HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
domainId| Domain Id of the instances
instanceId | Instance Id of the used
status| status of the instances whether it is updated or not.

### HTTP Response

`Instance updated.`

```json
"Machine Status Updated "
```

<aside class="success">
Instance updated.
</aside>

## Update Auth Type
It updated the type of Authorization used.

```shell
curl --location --request PUT 'https://api.authnull.kloudlearn.com/api/v1/instances/updateAuthType' 
```

```http
PUT /api/v1/instances/updateAuthType HTTP/1.1
```

```json
{
    "instanceId":"1",
    "domainId":"1",
    "authType":"SSH,DID,Password"
    
```

### Access Token
Authorization Key Required 


### HTTP Request
PUT /api/v1/instances/updateAuthType HTTP/1.1

### Query Parameter

Parameter  | Description
---------  | -----------
instanceId | Instance Id 
domainId   | domain Id
authType   | Authorization type
Key        | Authorization Key

### HTTP Response

`Auth Type updated`

```json
{
  "Auth Type Updated"
}
```
<aside class="success">
Auth type updated
</aside>


## Assign  User to Machines

It assign usere to existing machines.

```shell
curl --location --request 'https://api.authnull.kloudlearn.com/api/v1/instances/assignUsersToMachines
```

```http
POST /api/v1/instances/assignUsersToMachines HTTP/1.1
```

```json

{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "add"
}


 

{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "remove"
}

```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/assignUsersToMachines HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| Domain Id of the instances
instanceIds | Instance Id of the used
userId | Users id of users
action | Whether it is add or remove


### HTTP Response

`Assign  user to Machine`

```json
{
    "code": 200,
    "message": "Successfully Added"
}
```

<aside class="success">
Group added to Machine
</aside>



## Assign Groups To Machines

It adds/removes groups to existing machines.

```shell
curl --location --request PUT 'https://api.authnull.kloudlearn.com/api/v1/instances/addGroupsToMachines' \
```

```http
PUT /api/v1/instances/addGroupsToMachines HTTP/1.1
```

```json
{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"add"
}


 

{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"remove"
}
```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/addGroupsToMachines/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| Domain Id of the instances
instanceId | Instance Id of the used
groupId | Group Id
actions | whether Group is added to machines or not.


### HTTP Response

`Group added to Machine`

```json
{
    "code": 200,
    "message": "Successfully Added"
}
```

<aside class="success">
Group added to Machine
</aside>



