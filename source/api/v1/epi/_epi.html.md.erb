# Endpoint Management
Endpoint management is the process of actively monitoring, detecting, and preventing malware attacks on devices that are connected to a network. This is typically done to implement security policies and monitor suspicious activities on endpoints.Its can be done by

1.Inventory / management of Endpoints or servers (windows, linux, macos and others) 

2.Active Directory Sync for users (one way only). 

3.Workflows to control permissions

4.endpoint user management through Endpoint User Management Service.

## List Instances
The List Instances API allows users to retrieve a list of computing instances that belong to an endpoint group in a system or application.This API provides a simple and convenient way to access information about computing instances within an endpoint group and their status, configuration, or usage metrics.

```shell
curl POST 'https://did-authdev.broadcom.net/pamservice/api/v1/instances/list' \ 
--header 'Content-Type: application/json' \
--data '{
  "domainId": 1,
"pageId": 1,
"pageSize": 10,
"filter":""
}'
```

```http
POST /api/v1/instances/list HTTP/1.1
```

```json
{
  "domainId": 1,
"pageId": 1,
"pageSize": 10,
"filter":""
}
```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/list HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
domainId |  The domainId is used to specify the ID of the domain to which the endpoint belongs.
pageId |Page ID refers to the page number.
pageSize | Page size refers to the number of endpoints groups to be fetched.
filter | filter is the search keyword for searching endpoint groups.

### HTTP Response

`All the instances listed below.`

```json
{
    "domainId": 1,
    "groupId": 0,
    "totalCount": 7,
    "instances": [
        {
            "totalUsers": 38,
            "instanceName": "SK2014",
            "osName": "RedHat",
            "publicIp": "192.168.3.1",
            "privateIp": "",
            "hostName": "",
            "status": "Inactive",
            "instanceId": 1,
            "totalGroups": 8
        }
      ]
    }
```

<aside class="success">
All the instances listed below.
</aside>

## Add Instances
The Add Instance API allows users to add a new computing instance to an endpoint group in a system or application.This API provides a simple and secure way to add computing instances to an endpoint group and expand the computing infrastructure of an organization.


```shell
curl POST 'https://did-authdev.broadcom.net/pamservice/api/v1/instances/addInstance \
--header 'Content-Type: application/json' \
--data '{
"domain_id":25,
"instance_name":"kloudone.vm",
"os_id":1,
"public_ip":"144.32.55.5",
"private_ip":"10.32.45.1"
}

```

```http
POST /api/v1/instances/addInstance HTTP/1.1
```

```json
{
"domainId":1234,
"instanceName":"kloudone.vm",
"osId":1,
"publicIp":"144.32.55.5",
"privateIp":"10.32.45.1",
}
```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/addInstance HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
domainId |The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceName | The instanceName specifies the name of the instance that the endpoint belongs to.
osId | The osId specifies the operating system identifier for the device associated with the endpoint.
publicIp | The public IP refers to the unique identifier assigned to a device or network interface that is visible to the public internet.
privateIp |The privateIp is used to specify the private IP address for an endpoint in a private network.


### HTTP Response

`Instance added to the list.`

```json
{
  "instanceId": "fdsf-dfdf-gfdsgf-fdsgfdg-fdge",
  "code": 200,
  "message": "success" 
}
```
<aside class="success">
Instance added to the list.
</aside>


## Update Auth Type
The Update Auth Type API allows users to update the authentication type used for a computing instance within an endpoint group in a system or application. This API provides a simple and flexible way to manage the authentication methods used within an endpoint group and ensure that they meet the security requirements of an organization.

```shell
curl PUT https://did-authdev.broadcom.net/pamservice/api/v1/instances/updateAuthType \
--header 'Content-Type: application/json' \
--data '{
    "instanceId":1,
    "domainId":1,
    "authType":"SSH,DID,Password"
}'
```

```http
PUT /api/v1/instances/updateAuthType HTTP/1.1
```

```json
{
    "instanceId":1,
    "domainId":1,
    "authType":"SSH,DID,Password"
}
 
```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/updateAuthType HTTP/1.1`

### Query Parameter

Parameter  | Description
---------  | -----------
instanceId | The instanceId is used to specify the ID of the instances that are part of the endpoint.
domainId   | The domainId is used to specify the ID of the domain to which the endpoint belongs.
authType   | Authorization type


### HTTP Response

`Auth Type updated`

```json
{
  "Auth Type Updated"
}
```
<aside class="success">
Auth type updated
</aside>


## Assign  User to Endpoints

The Assign User to Endpoints API allows users to assign one or more users to specific computing instances within an endpoint group in a system or application. This API provides a simple and secure way to manage user access to computing instances and ensure that only authorized users can access sensitive information or resources.

```shell
curl POST 'https://did-authdev.broadcom.net/pamservice/api/v1/instances/assignUsersToMachines  \
--header 'Content-Type: application/json' \
--data '{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "add"
}'
```

```http
POST /api/v1/instances/assignUsersToMachines HTTP/1.1
```

```json

{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "add"
}

{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "remove"
}

```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/assignUsersToMachines HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceIds |  The instanceId is used to specify the ID of the instances that are part of the endpoint.
userId |The userId is used to specify the unique identifier of a user to be added or removed from an endpoint.
action |The action is used to specify the type of action to be performed on an endpoint, such as add or remove an endpoint.


### HTTP Response

`Assign  user to endpoint`

```json
{
    "code": 200,
    "message": "Successfully Added"
}

```

<aside class="success">
Group added to endpoint
</aside>



## Assign Groups To Endpoints

The Assign Groups to Endpoints API allows users to assign one or more groups to specific computing instances within an endpoint group in a system or application.

```shell
curl PUT 'https://did-authdev.broadcom.net/pamservice/api/v1/instances/assignGroupToMachines  \
--header 'Content-Type: application/json' \
--data '{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"add"
}
'
```

```http
PUT /api/v1/instances/assignGroupToMachines HTTP/1.1
```

```json
{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"add"
}


 

{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"remove"
}
```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/assignGroupToMachines`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceId |  The instanceId is used to specify the ID of the instances that are part of the endpoint.
groupId | The groupId is used to specify the unique identifier of an endpoint to retrieve, update or delete its information.
actions | The action is used to specify the type of action to be performed on a endpoint, such as add or remove a endpoint.


### HTTP Response

`Group added to Machine`

```json
{
    "code": 200,
    "message": "Successfully Added"
}
```

<aside class="success">
Group added to Machine
</aside>



