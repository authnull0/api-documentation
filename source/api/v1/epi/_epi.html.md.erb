# Endpoint Management
Endpoint management is the process of actively monitoring, detecting, and preventing malware attacks on devices that are connected to a network. This is typically done to implement security policies and monitor suspicious activities on endpoints.Its can be done by

1.Inventory / management of Endpoints or servers (windows, linux, macos and others) 

2.Active Directory Sync for users (one way only). 

3.Workflows to control permissions

4.endpoint user management through Endpoint User Management Service.

## List Instances
The List Instances API allows users to retrieve a list of computing instances that belong to an endpoint group in a system or application.This API provides a simple and convenient way to access information about computing instances within an endpoint group and their status, configuration, or usage metrics.

```shell
curl POST 'https://api.authnull.kloudlearn.com/api/v1/instances/list' \ 
--header 'Content-Type: application/json' \
--data '{
  "domainId": 1,
"pageId": 1,
"pageSize": 10,
"filter":""
}'
```

```http
POST /api/v1/instances/list HTTP/1.1
```

```json
{
  "domainId": 1,
"pageId": 1,
"pageSize": 10,
"filter":""
}
```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/list HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
domainId |  The domainId is used to specify the ID of the domain to which the endpoint belongs.
pageId |Page ID refers to the page number.
pageSize | Page size refers to the number of endpoints groups to be fetched.
filter | filter is the search keyword for searching endpoint groups.

### HTTP Response

`All the instances listed below.`

```json
{
    "domainId": 1,
    "groupId": 0,
    "totalCount": 7,
    "instances": [
        {
            "totalUsers": 38,
            "instanceName": "SK2014",
            "osName": "RedHat",
            "publicIp": "192.168.3.1",
            "privateIp": "",
            "hostName": "",
            "status": "Inactive",
            "instanceId": 1,
            "totalGroups": 8
        }
      ]
    }
```

<aside class="success">
All the instances listed below.
</aside>

## Add Instances
The Add Instance API allows users to add a new computing instance to an endpoint group in a system or application.This API provides a simple and secure way to add computing instances to an endpoint group and expand the computing infrastructure of an organization.


```shell
curl POST 'https://api.authnull.kloudlearn.com/api/v1/instances/addInstance \
--header 'Content-Type: application/json' \
--data '{
"domain_id":25,
"instance_name":"kloudone.vm",
"os_id":1,
"public_ip":"144.32.55.5",
"private_ip":"10.32.45.1"
}

```

```http
POST /api/v1/instances/addInstance HTTP/1.1
```

```json
{
"domainId":1234,
"instanceName":"kloudone.vm",
"osId":1,
"publicIp":"144.32.55.5",
"privateIp":"10.32.45.1",
}
```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/addInstance HTTP/1.1`

### Query Parameter

Parameter  | Description
--------- | -----------
domainId |The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceName | The instanceName specifies the name of the instance that the endpoint belongs to.
osId | The osId specifies the operating system identifier for the device associated with the endpoint.
publicIp | The public IP refers to the unique identifier assigned to a device or network interface that is visible to the public internet.
privateIp |The privateIp is used to specify the private IP address for an endpoint in a private network.


### HTTP Response

`Instance added to the list.`

```json
{
  "instanceId": "fdsf-dfdf-gfdsgf-fdsgfdg-fdge",
  "code": 200,
  "message": "success" 
}
```
<aside class="success">
Instance added to the list.
</aside>


## Update Auth Type
The Update Auth Type API allows users to update the authentication type used for a computing instance within an endpoint group in a system or application. This API provides a simple and flexible way to manage the authentication methods used within an endpoint group and ensure that they meet the security requirements of an organization.

```shell
curl PUT https://api.authnull.kloudlearn.com/api/v1/instances/updateAuthType \
--header 'Content-Type: application/json' \
--data '{
    "instanceId":1,
    "domainId":1,
    "authType":"SSH,DID,Password"
}'
```

```http
PUT /api/v1/instances/updateAuthType HTTP/1.1
```

```json
{
    "instanceId":1,
    "domainId":1,
    "authType":"SSH,DID,Password"
}
 
```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/updateAuthType HTTP/1.1`

### Query Parameter

Parameter  | Description
---------  | -----------
instanceId | The instanceId is used to specify the ID of the instances that are part of the endpoint.
domainId   | The domainId is used to specify the ID of the domain to which the endpoint belongs.
authType   | Authorization type


### HTTP Response

`Auth Type updated`

```json
{
  "Auth Type Updated"
}
```
<aside class="success">
Auth type updated
</aside>


## Assign  User to Endpoints

The Assign User to Endpoints API allows users to assign one or more users to specific computing instances within an endpoint group in a system or application. This API provides a simple and secure way to manage user access to computing instances and ensure that only authorized users can access sensitive information or resources.

```shell
curl POST 'https://api.authnull.kloudlearn.com/api/v1/instances/assignUsersToMachines  \
--header 'Content-Type: application/json' \
--data '{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "add"
}'
```

```http
POST /api/v1/instances/assignUsersToMachines HTTP/1.1
```

```json

{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "add"
}

{
    "instanceIds":[1,2],
    "domainId":1,
    "userIds":[106,103],
    "action" : "remove"
}

```

### Access Token
Authorization Key Required 

### HTTP Request
`POST /api/v1/instances/assignUsersToMachines HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceIds |  The instanceId is used to specify the ID of the instances that are part of the endpoint.
userId |The userId is used to specify the unique identifier of a user to be added or removed from an endpoint.
action |The action is used to specify the type of action to be performed on an endpoint, such as add or remove an endpoint.


### HTTP Response

`Assign  user to endpoint`

```json
{
    "code": 200,
    "message": "Successfully Added"
}

```

<aside class="success">
Group added to endpoint
</aside>



## Assign Groups To Endpoints

The Assign Groups to Endpoints API allows users to assign one or more groups to specific computing instances within an endpoint group in a system or application.

```shell
curl PUT 'https://api.authnull.kloudlearn.com/api/v1/instances/assignGroupToMachines  \
--header 'Content-Type: application/json' \
--data '{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"add"
}
'
```

```http
PUT /api/v1/instances/assignGroupToMachines HTTP/1.1
```

```json
{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"add"
}


 

{
    "instanceId":[1,2],
    "domainId":1,
    "groupId":[1,2,3],
     "action":"remove"
}
```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/assignGroupToMachines`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceId |  The instanceId is used to specify the ID of the instances that are part of the endpoint.
groupId | The groupId is used to specify the unique identifier of an endpoint to retrieve, update or delete its information.
actions | The action is used to specify the type of action to be performed on a endpoint, such as add or remove a endpoint.


### HTTP Response

`Group added to Machine`

```json
{
    "code": 200,
    "message": "Successfully Added"
}
```

<aside class="success">
Group added to Machine
</aside>


## View Generated PAM

The View Generated PAM API is a feature of endpoint management that provides a view of the generated PAM configuration file.The View Generated PAM API allows administrators to view the contents of the PAM configuration file, which can be useful for troubleshooting authentication issues or verifying that the correct PAM modules are being used. The API can be accessed through endpoint management tools and provides a read-only view of the PAM configuration file.

```shell
curl --location 'https://api.authnull.kloudlearn.com/api/v1/instances/viewGeneratedPamCode' \
--header 'Content-Type: application/json' \
--data '{
    "domainId": 1,
    "instanceId": 1

}'

```

```http
POST /api/v1/instances/viewGeneratedPamCode HTTP/1.1
```

```json
{
    "domainId": 1,
    "instanceId": 1

}

```

### Access Token
Authorization Key Required 


### HTTP Request
`POST /api/v1/instances/viewGeneratedPamCode HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceId |  The instanceId is used to specify the ID of the instances that are part of the endpoint.


### HTTP Response

`PAM Code generated`

```json
{
    "InstanceId": "1",
    "Code": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "Message": "Success"
}
```

<aside class="success">
PAM Code generated
</aside>


## Add Credential rotation policy

The Add Credential Rotation Policy API is a part of endpoint management and allows for the creation of a policy that rotates the credentials used by an endpoint. This API can be used to specify the frequency of credential rotation, the type of credentials to rotate, and any additional settings related to the rotation process. Once created, the policy can be applied to one or more endpoints to ensure that their credentials are rotated on a regular basis, improving security and reducing the risk of unauthorized access.


```shell
curl --location 'https://api.authnull.kloudlearn.com/api/v1/instances/addCredentialRotationPolicy' \
--header 'Content-Type: application/json' \
--data '{
    "policyName": "testPolicy",
    "rotationTime": 30,
    "credentialMedium": "Email",
    "sessionExpiryTime": 15,
     "userType": "priv",
     "instanceId":18,
     "instanceGroupId":1,
     "domainId":0
  }'

```

```http
POST /api/v1/instances/addCredentialRotationPolicy HTTP/1.1
```

```json
{
  "policyName": "testPolicy",
  "rotationTime": 30,
  "credentialMedium": "Email",
  "sessionExpiryTime": 15,
   "userType": "priv",
   "instanceId":18,
   "instanceGroupId":1,
   "domainId":0
}

```

### Access Token
Authorization Key Required 


### HTTP Request
`POST /api/v1/instances/addCredentialRotationPolicy HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
policyName |  It is used to specify the name of the credential rotation policy being created.
rotationTime| It specifies the time interval for rotating the credentials associated with an endpoint.
credentialMedium | It specifies the type of credential being rotated, such as a password or API key.
sessionExpiryTime | It specifies the time interval after which a user session will expire.
userType |It specifies the type of user to which the policy applies.
instanceGroupId | It specifies the ID of the instance group to which the rotation policy should be applied.
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceId |  The instanceId is used to specify the ID of the instances that are part of the endpoint.


### HTTP Response

`Credential rotation policy Created`

```json
{
    "PolicyId": "1",
    "Code": "200",
    "Message": "Credential Rotation Policy Created"
}
```

<aside class="success">
Credential rotation policy Created
</aside>



## List All Credential rotation policy

The List All Credential Rotation Policy API is an endpoint management feature that allows users to view all credential rotation policies associated with their account. This API can be used to retrieve details such as the name, description, and frequency of rotation for each policy, as well as the credentials that are affected by the policy. By providing this information, the API enables users to monitor and manage their credentials effectively, ensuring that they remain secure and up-to-date at all times.

```shell
curl --location 'https://api.authnull.kloudlearn.com/api/v1/instances/listAllCredentialRotationPolicy' \
--header 'Content-Type: application/json' \
--data '{
  "pageId":1,
  "pageSize":2
}'

```

```http
POST /api/v1/instances/listAllCredentialRotationPolicy HTTP/1.1
```

```json
{
    "pageId":1,
    "pageSize":2
}

```

### Access Token
Authorization Key Required 


### HTTP Request
`POST api/v1/instances/listAllCredentialRotationPolicy HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
pageId |Page ID refers to the page number.
pageSize | Page size refers to the number of endpoints groups to be fetched.


### HTTP Response

`Credential rotation policy Created`

```json
[
    {
        "policyName": "AAAPolicy",
        "rotationTime": 30,
        "credentialMedium": "Email",
        "sessionExpiryTime": 15,
        "userType": "priv"
    },
    {
        "policyName": "BBBPolicy",
        "rotationTime": 30,
        "credentialMedium": "Email",
        "sessionExpiryTime": 45,
        "userType": "priv"
    }
]
```

<aside class="success">
Credential rotation policy Created
</aside>


## Update Credential rotation policy

The Update Credential Rotation Policy API is a feature of endpoint management that allows users to modify the rotation policy for their endpoint credentials. With this API, users can adjust the frequency and method of credential rotation, ensuring that their endpoint security remains up-to-date and effective. This API can be used in conjunction with other endpoint management tools to create a comprehensive security strategy for managing endpoint access and protecting sensitive data.

```shell
curl --location 'https://api.authnull.kloudlearn.com/api/v1/instances/updateCredentialRotationPolicy' \
--header 'Content-Type: application/json' \
--data '{
  "policyId":1,
  "policyName" : "TestPplocy" , 
  "rotationTime" : 3,  
  "instanceId" :4, 
  "instanceGroupId" : 5, 
  "domainId" :10
}'

```

```http
PUT /api/v1/instances/updateCredentialRotationPolicy HTTP/1.1
```

```json
{
    "policyId":1,
    "policyName" : "TestPplocy" , 
    "rotationTime" : 3,  
    "instanceId" :4, 
    "instanceGroupId" : 5, 
    "domainId" :10
}

```

### Access Token
Authorization Key Required 


### HTTP Request
`PUT /api/v1/instances/updateCredentialRotationPolicy HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
policyName |  It is used to specify the name of the credential rotation policy being created.
rotationTime| It specifies the time interval for rotating the credentials associated with an endpoint.
policyId | It is used to specify the ID of the policy to be updated.
instanceGroupId | It specifies the ID of the instance group to which the rotation policy should be applied.
domainId| The domainId is used to specify the ID of the domain to which the endpoint belongs.
instanceId |  The instanceId is used to specify the ID of the instances that are part of the endpoint.


### HTTP Response

`Credential Rotation Policy updated`

```json
{
    "Code": "200",
    "Message": "Credential Rotation Policy updated"
}
```

<aside class="success">
Credential Rotation Policy updated
</aside>



##	Delete Credential rotation policy

The Delete Credential Rotation Policy API is an endpoint management API that allows you to delete a previously created credential rotation policy. This API is typically used in conjunction with other endpoint management APIs to automate the process of managing credentials and their associated policies. By deleting a credential rotation policy, you can remove an outdated or unnecessary policy from your endpoint management system, which can help improve security and streamline your overall endpoint management workflow.

```shell
curl --location 'https://api.authnull.kloudlearn.com/api/v1/instances/deleteCredentialRotationPolicy' \
--header 'Content-Type: application/json' \
--data '{
  "policyId":1,
}'

```

```http
DELETE /api/v1/instances/deleteCredentialRotationPolicy HTTP/1.1
```

```json
{
    "policyId":1,
}

```

### Access Token
Authorization Key Required 


### HTTP Request
`DELETE /api/v1/instances/deleteCredentialRotationPolicy HTTP/1.1`

### Query Parameter
Parameter  | Description
--------- | -----------
policyId | It is used to specify the ID of the policy to be updated.


### HTTP Response

`Deleted Credential Policy Successfully`

```json
{
    "Code": "200",
    "Message": "Deleted Credential Policy Successfully"
}

```

<aside class="success">
Deleted Credential Policy Successfully
</aside>



