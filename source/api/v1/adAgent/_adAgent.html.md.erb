# AD Agent

The AD agent is a software component that enables the import of user groups from a connected active directory. Once installed and configured, the AD agent runs as a daemon process that continuously retrieves and updates user group information from the active directory.

To install the AD agent, follow the instructions provided in the Configuration file, which can be downloaded from the Add Directory module. The Configuration file contains all the necessary information and parameters required to install and configure the AD agent.

Once the AD agent is installed and running, the imported user groups will be listed under the Directory Users section of the application. These user groups can then be used to manage access to various resources and applications within the system.

It is important to ensure that the AD agent is properly configured and maintained to ensure accurate and up-to-date user group information. Regular monitoring and troubleshooting of the AD agent may be necessary to ensure its proper functioning.

### Daemon
The daemon is the program that runs continuously in the background to synchronize user and group information to the AD proxy. The daemon may be designed to run on a dedicated server or workstation and can be configured to perform periodic checks or real-time synchronization between the source system (such as Active Directory) and the target system (such as the AD proxy).

## Configuration File
1. The windows server of 2012 and above is needed.

2. You need access to window server to install okta Active Directory agent.

3.The agent host server must be a member of the same windows domain as your active directory.

4. The windows server where the agent reside must be on at all time.

## Save ActiveDirectory Configuration

```shell
curl POST "https://api.authnull.kloudlearn.com/api/v1/saveActiveDirectoryConfig"
```

```HTTP
POST api/v1/saveActiveDirectoryConfig HTTP/1.1
```

```json
[
 {
    "directoryName":"xyz-xyz-xyz", 
    "accountName":"abc-abc-abc", 
    "appUrl":"www.kloudlearn.com", 
    "domainId":"1"
}
]
```

Active Directory is a directory service or container which stores data objects on your local network environment. The service records data on users, devices, applications, groups, and devices in a hierarchical structure.
Active Directory enables users to log on to and manage a variety of resources from one location. Login credentials are unified so that it is easier to manage multiple devices without having to enter account details to access each individual machine.

### Access Token
Authorization Key Required 


### HTTP Request

`POST api/v1/saveActiveDirectoryConfig HTTP/1.1`

### Query Parameters

Parameter | Description
--------- | ------- | -----------
directoryName | The directoryName specifies the name of the directory where the configuration data will be saved.
appUrl | The appUrl is used to specify the URL of the application that is integrated with the Active Directory.
accountName | The accountName specifies the name of the Active Directory account being configured.
domainId | This is the unique ID assigned by the registry to the domain. 

### HTTP response

` ActiveDirectory Configure successfully saved`


<aside class="success">
ActiveDirectory Configure successfully saved
</aside>

## Restart the Agent
 For Restart the agent what will happen is the installation will complete and all the api incluging the Active Directory will configure and import the group and the user to active directory of the AuthNull.

## Import Users From LDIF
The Import Users API is a software component that can be integrated into the Active Directory API Communications module to enable the import of user data from external systems or sources. This API allows for the automation of user data management, simplifying the process of adding or updating user information in the Active Directory.

```shell
curl --location 'https://api.authnull.kloudlearn.com/api/v1/integrations/activeDirectory/importLdif' \
--form 'file=@"/C:/Users/HP/Downloads/sample.ldif"' \
--form 'fileName="paul.txt"' \
--form 'domainId="1"'
```

```http
POST /api/v1/integrations/activeDirectory/importLdif HTTP/1.1
```

```
Multipart form data
file:
filename:
domainId:
```


### Access Token
Authorization Key Required 

### HTTP Request

`POST /api/v1/integrations/activeDirectory/importLdif HTTP/1.1`

### Query Parameters

Parameter | Description
--------- | ------- | -----------
file | The file specifies the path and filename of the LDIF file containing the user data to be imported.
filename | The filename specifies the name of the LDIF file containing the user data to be imported into the Active Directory.
domainId | The domainId specifies the identifier of the Active Directory domain where the users are imported.

### HTTP response

`Import Job Added to Queue`


<aside class="success">
Import Job Added to Queue
</aside>